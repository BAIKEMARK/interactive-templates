<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground - 组件库</title>

    <!-- Core Framework -->
    <link rel="stylesheet" href="core/layout.css">

    <!-- Component Styles -->
    <link rel="stylesheet" href="components/ui-basic/style.css">
    <link rel="stylesheet" href="components/demo-game-ui/style.css">
    <link rel="stylesheet" href="components/demo-lion-dance/style.css">
    <link rel="stylesheet" href="components/demo-tilt/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body class="playground-body">

    <!-- Sticky Header -->
    <header class="playground-header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">P</div>
                <h1>Playground</h1>
            </div>

            <nav class="filter-nav">
                <button class="filter-btn active" data-filter="all">全部</button>
                <button class="filter-btn" data-filter="ui">UI 组件</button>
                <button class="filter-btn" data-filter="game-ui">游戏界面</button>
                <button class="filter-btn" data-filter="effect">视觉特效</button>
                <button class="filter-btn" data-filter="demo">复杂演示</button>
            </nav>

            <a href="#" class="header-link">文档</a>
        </div>
    </header>

    <!-- Main Grid Container -->
    <main class="playground-grid" id="mainGrid">

        <!-- Category: UI Elements (Buttons) -->
        <div class="ui-card" data-category="ui">
            <div class="ui-card-preview">
                <button class="btn-modern btn-primary" onclick="alert('点击了主按钮')">主按钮</button>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".btn-primary">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-btn-primary">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">主按钮 (Primary)</span>
                <span class="ui-tag">#BTN-PRI</span>
            </div>
        </div>

        <div class="ui-card dark-preview" data-category="ui">
            <div class="ui-card-preview">
                <button class="btn-modern btn-glass" onclick="alert('点击了毛玻璃按钮')">毛玻璃效果</button>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".btn-glass">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-btn-glass">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">毛玻璃按钮 (Glass)</span>
                <span class="ui-tag">#BTN-GLASS</span>
            </div>
        </div>

        <!-- Inputs -->
        <div class="ui-card" data-category="ui">
            <div class="ui-card-preview" style="width:80%">
                <div class="input-group">
                    <input type="text" class="input-modern" placeholder=" " id="demoInput">
                    <label for="demoInput" class="input-label">用户名</label>
                </div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".input-group">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-input">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">浮动标签输入框</span>
                <span class="ui-tag">#INP-FLOAT</span>
            </div>
        </div>

        <!-- Toggles -->
        <div class="ui-card" data-category="ui">
            <div class="ui-card-preview">
                <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="slider round"></span>
                </label>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".toggle-switch">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-toggle">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">iOS 开关</span>
                <span class="ui-tag">#TOGGLE</span>
            </div>
        </div>

        <!-- Loaders -->
        <div class="ui-card" data-category="ui">
            <div class="ui-card-preview">
                <div class="loader-spinner"></div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".loader-spinner">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-loader">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">加载转圈</span>
                <span class="ui-tag">#LOAD-SPIN</span>
            </div>
        </div>

        <!-- Cards -->
        <div class="ui-card dark-preview span-2" data-category="ui">
            <div class="ui-card-preview">
                <div class="glass-card-demo" style="width: 100%; max-width: 300px;">
                    <div class="card-content">
                        <h4 class="card-title">毛玻璃卡片</h4>
                        <p class="card-text">背景模糊效果，适合深色背景。</p>
                    </div>
                </div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".glass-card-demo">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-card-glass">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">毛玻璃卡片 (Glass Card)</span>
                <span class="ui-tag">#CARD-GLASS</span>
            </div>
        </div>

        <!-- Category: Game UI Simulator (Combined Overlay) -->
        <div class="ui-card span-2" data-category="game-ui">
            <div class="ui-card-preview game-ui-simulator"
                style="background: linear-gradient(to bottom, #87CEEB, #E0F7FA); position: relative; height: 100%; min-height: 250px; overflow: hidden;">
                <!-- Simulated Game Content -->
                <div style="position: absolute; bottom: 0; width: 100%; height: 30%; background: white;"></div>

                <!-- Simulated Game UI -->
                <div style="position: absolute; top: 10px; right: 10px; display: flex; gap: 10px;">
                    <div class="pause-card-mini" onclick="showToast('点击了暂停')">
                        <span style="font-weight: bold;">||</span>
                    </div>
                </div>

                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                    <div class="history-card-mini"
                        style="background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); text-align: center;">
                        <div class="history-title" style="font-weight: bold; margin-bottom: 5px;">历史记录</div>
                        <div style="font-size: 12px; color: #666; display: flex; flex-direction: column; gap: 4px;">
                            <span>2024-02-04: 9999分</span>
                            <span>2024-02-03: 8888分</span>
                        </div>
                    </div>
                </div>

                <div
                    style="position: absolute; bottom: 10px; width: 100%; text-align: center; color: #333; font-size: 12px;">
                    模拟游戏视口 (Game Viewport)
                </div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-game-ui">复制全套源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">游戏内界面组合 (Game UI)</span>
                <span class="ui-tag">#GAME-UI</span>
            </div>
        </div>

        <!-- Category: Visual Effects (Toggles) -->
        <div class="ui-card" data-category="effect">
            <div class="ui-card-preview" style="flex-direction: column; gap: 10px;">
                <button class="btn-modern btn-outline" onclick="toggleSnow(true)">开启下雪</button>
                <button class="btn-modern btn-outline" onclick="toggleSnow(false)">关闭下雪</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">全局下雪 (Snow)</span>
                <span class="ui-tag">#FX-SNOW</span>
            </div>
        </div>

        <div class="ui-card" data-category="effect">
            <div class="ui-card-preview">
                <div style="display:flex; gap:10px;">
                    <div onclick="changeBgColor('#f3f4f6')"
                        style="width:30px; height:30px; background:#f3f4f6; border:1px solid #ddd; border-radius:50%; cursor:pointer;"
                        title="浅灰"></div>
                    <div onclick="changeBgColor('#E0F2FE')"
                        style="width:30px; height:30px; background:#E0F2FE; border:1px solid #ddd; border-radius:50%; cursor:pointer;"
                        title="冰蓝"></div>
                    <div onclick="changeBgColor('#1a1a1a')"
                        style="width:30px; height:30px; background:#1a1a1a; border:1px solid #ddd; border-radius:50%; cursor:pointer;"
                        title="深色"></div>
                </div>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">背景切换 (Background)</span>
                <span class="ui-tag">#FX-BG</span>
            </div>
        </div>

        <!-- Category: Complex Demos (Modals) -->
        <div class="ui-card span-2" data-category="demo" onclick="openDemoModal('comic')">
            <div class="ui-card-preview" style="cursor: pointer;">
                <img src="assets/rules/lion-customs-comic.png" style="max-height: 200px; object-fit: contain;">
                <div class="play-icon-overlay">▶</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".comic-wrapper">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-comic">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">舞狮交互漫画 (Lion Dance Comic)</span>
                <span class="ui-tag">#DEMO-COMIC</span>
            </div>
        </div>

        <div class="ui-card" data-category="demo" onclick="openDemoModal('lightbox')">
            <div class="ui-card-preview" style="cursor: pointer;">
                <img src="assets/rules/fis-rules.png" style="max-height: 150px;">
                <div class="overlay-hint">点击预览</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".lightbox-container">复制
                    ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-lightbox">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">灯箱缩放 (Lightbox)</span>
                <span class="ui-tag">#DEMO-LIGHTBOX</span>
            </div>
        </div>

        <div class="ui-card" data-category="demo" onclick="openDemoModal('tilt')">
            <div class="ui-card-preview" style="cursor: pointer;">
                <img src="assets/gallery/snowboard.png" style="max-width: 80%;">
                <div class="overlay-hint">3D 悬浮预览</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".tilt-stage">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-tilt">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">3D 倾斜卡片 (Tilt)</span>
                <span class="ui-tag">#DEMO-TILT</span>
            </div>
        </div>

    </main>

    <!-- Global Toast -->
    <div id="toastNotification" class="toast hidden">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span id="toastMessage">已复制!</span>
    </div>

    <!-- Modals Container -->
    <div id="modalContainer"></div>

    <!-- Code Templates (Hidden Sources) -->

    <script type="text/plain" id="code-comic">
<!-- 1. Include CSS -->
    <style>
        .comic-hotspot {
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0% {
                background: rgba(255, 255, 255, 0.1);
            }

            50% {
                background: rgba(255, 255, 255, 0.3);
            }

            100% {
                background: rgba(255, 255, 255, 0.1);
            }
        }

        /* Hotspot Dot */
        .hotspot-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
            animation: pulse-white 2s infinite;
            pointer-events: none;
        }

        @keyframes pulse-white {
            0% {
                transform: translate(-50%, -50%) scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
            }

            70% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 0 0 20px rgba(255, 255, 255, 0);
            }

            100% {
                transform: translate(-50%, -50%) scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
            }
        }
    </style>

    <!-- 2. HTML Structure -->
    <div class="comic-container" style="position:relative; width:100%; max-width:800px; aspect-ratio:16/9;">
        <!-- Base Video -->
        <video id="baseVideo" src="assets/comic.mp4" loop muted autoplay
            style="width:100%; height:100%; object-fit:contain;"></video>

        <!-- Alt Video (Overlay) -->
        <video id="altVideo" src="assets/comic-alt.mp4" loop muted
            style="width:100%; height:100%; object-fit:contain; position:absolute; top:0; left:0; opacity:0; transition:opacity 0.5s;"></video>

        <!-- Mask Image -->
        <div id="mask"
            style="position:absolute; inset:0; background: url('assets/cover.png') center/contain no-repeat; transition: clip-path 0.5s; pointer-events:none;">
        </div>

        <!-- Interactive Hotspots -->
        <div class="comic-hotspots" style="position:absolute; inset:0;">
            <div class="comic-hotspot" onclick="togglePanel(0)"
                style="position:absolute; top:5%; left:5%; width:90%; height:28%; cursor:pointer;">
                <div class="hotspot-dot" style="top:50%; left:50%;"></div>
            </div>
            <div class="comic-hotspot" onclick="togglePanel(1)"
                style="position:absolute; top:36%; left:5%; width:90%; height:28%; cursor:pointer;">
                <div class="hotspot-dot" style="top:50%; left:50%;"></div>
            </div>
            <div class="comic-hotspot" onclick="togglePanel(2)"
                style="position:absolute; top:69%; left:5%; width:90%; height:28%; cursor:pointer;">
                <div class="hotspot-dot" style="top:50%; left:50%;"></div>
            </div>
        </div>
    </div>

    <!-- 3. Interaction Logic -->
    <script>
    let activePanel = -1;
    function togglePanel(index) {
        const mask = document.getElementById('mask');
        const video = document.getElementById('baseVideo');
        const videoAlt = document.getElementById('altVideo');
        
        // Handle Logic (Same as Playground)
        if (index === 1 && videoAlt) {
            videoAlt.style.opacity = '1'; videoAlt.play(); video.pause();
        } else if (videoAlt) {
            videoAlt.style.opacity = '0'; videoAlt.pause(); video.play();
        }

        if (activePanel === index) {
            activePanel = -1;
            mask.style.clipPath = 'none';
        } else {
            activePanel = index;
            const clips = [
                'polygon(0% 33.33%, 100% 33.33%, 100% 100%, 0% 100%)', // Top Panel
                'polygon(0% 0%, 100% 0%, 100% 33.33%, 0% 33.33%, 0% 66.66%, 100% 66.66%, 100% 100%, 0% 100%)', // Middle
                'polygon(0% 0%, 100% 0%, 100% 66.66%, 0% 66.66%)' // Bottom
            ];
            mask.style.clipPath = clips[index];
        }
    }
</script>
    </script>

    <script type="text/plain" id="code-tilt">
<style>
.tilt-wrapper { perspective: 1000px; display: inline-block; }
</style>

<div class="tilt-wrapper" onmousemove="handleTilt(event)" onmouseleave="resetTilt()">
    <img id="tiltImg" src="image.png" style="transition: transform 0.1s cubic-bezier(0.2, 0.8, 0.2, 1); transform-style:preserve-3d;">
</div>

<script>
    let ticking = false;
    function handleTilt(e) {
        if (!ticking) {
            window.requestAnimationFrame(() => {
                const el = e.currentTarget;
                const rect = el.getBoundingClientRect();
                const x = (e.clientX - rect.left) / rect.width - 0.5;
                const y = (e.clientY - rect.top) / rect.height - 0.5;
                // Add scale and reverse Y axis for natural feel
                document.getElementById('tiltImg').style.transform = 
                    `rotateY(${x * 30}deg) rotateX(${-y * 30}deg) scale(1.05)`;
                ticking = false;
            });
            ticking = true;
        }
    }
    function resetTilt() {
        document.getElementById('tiltImg').style.transform = 'none';
    }
</script>
    </script>

    <script type="text/plain" id="code-lightbox">
<style>
.lightbox-modal {
    position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 9999;
    display: none; align-items: center; justify-content: center;
}
.lightbox-modal.active { display: flex; }
</style>

<!-- Trigger -->
<div class="lightbox-trigger" onclick="document.getElementById('lb-modal').classList.add('active')" style="cursor:zoom-in">
    <img src="preview.png" style="max-width:100%">
</div>

<!-- Modal -->
<div class="lightbox-modal" id="lb-modal" onclick="this.classList.remove('active')">
    <img src="full-res.png" style="max-width:90%; max-height:90%; cursor:zoom-out">
</div>
    </script>

    <!-- UI Component Logic (Hidden Code Sources) -->

    <script type="text/plain" id="code-btn-primary">
<style>
.btn-modern { border: none; border-radius: 8px; padding: 10px 24px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
.btn-primary { background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; }
.btn-primary:hover { opacity: 0.9; transform: translateY(-1px); }
</style>
<button class="btn-modern btn-primary">Primary</button>
    </script>

    <script type="text/plain" id="code-btn-glass">
<style>
.btn-modern { border: none; border-radius: 8px; padding: 10px 24px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
.btn-glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); color: white; }
.btn-glass:hover { background: rgba(255, 255, 255, 0.2); }
</style>
<button class="btn-modern btn-glass">Glass Button</button>
    </script>

    <script type="text/plain" id="code-input">
<style>
.input-group { position: relative; width: 100%; max-width: 300px; }
.input-modern { width: 100%; padding: 12px 16px; border: 1px solid #d1d5db; border-radius: 8px; outline: none; background: white; }
.input-label { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); background: white; padding: 0 4px; color: #6b7280; pointer-events: none; transition: 0.2s; }
.input-modern:focus { border-color: #6366f1; }
.input-modern:focus ~ .input-label, .input-modern:not(:placeholder-shown) ~ .input-label { top: 0; font-size: 0.75rem; color: #6366f1; }
</style>
<div class="input-group">
    <input type="text" class="input-modern" placeholder=" ">
    <label class="input-label">Label</label>
</div>
    </script>

    <script type="text/plain" id="code-toggle">
<style>
.toggle-switch { position: relative; display: inline-block; width: 50px; height: 28px; }
.toggle-switch input { opacity: 0; width: 0; height: 0; }
.toggle-switch .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
.toggle-switch .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
.toggle-switch input:checked + .slider { background-color: #2563eb; }
.toggle-switch input:checked + .slider:before { transform: translateX(22px); }
</style>
<label class="toggle-switch">
    <input type="checkbox" checked>
    <span class="slider round"></span>
</label>
    </script>

    <script type="text/plain" id="code-loader">
<style>
.loader-spinner { width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>
<div class="loader-spinner"></div>
    </script>

    <script type="text/plain" id="code-card-glass">
<style>
.glass-card-demo { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); padding: 20px; border-radius: 12px; color: white; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
</style>
<div class="glass-card-demo">
    <h3>Glass Card</h3>
    <p>Elegant translucency for dark backgrounds.</p>
</div>
    </script>

    <script type="text/plain" id="code-game-ui">
<style>
.pause-card-mini { width: 40px; height: 40px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); transition: transform 0.2s; }
.pause-card-mini:hover { transform: scale(1.1); }
.history-card-mini { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); min-width: 150px; }
.history-title { font-weight: bold; margin-bottom: 8px; border-bottom: 1px solid #eee; padding-bottom: 4px; }
</style>
<!-- Pause Button -->
<div class="pause-card-mini">
   <div style="font-weight:900; color:#333;">||</div>
</div>

<!-- History Panel -->
<div class="history-card-mini">
    <div class="history-title">History</div>
    <div>Score: 9999</div>
</div>
    </script>

    <!-- Hidden Canvas for Snow Effect -->
    <div style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:-1; visibility:hidden;"
        id="gameContainer">
        <canvas id="gameCanvas"></canvas>
    </div>

    <!-- Core & Components Logic -->
    <script src="core/snow-effect.js"></script>
    <script src="core/app.js"></script>
    <script src="components/demo-lion-dance/logic.js"></script>
    <script src="components/demo-tilt/logic.js"></script>

</body>

</html>