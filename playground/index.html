<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground - 组件库</title>

    <!-- Core Framework -->
    <link rel="stylesheet" href="core/layout.css">

    <!-- Component Styles -->
    <link rel="stylesheet" href="components/ui-basic/style.css">
    <link rel="stylesheet" href="components/demo-game-ui/style.css">
    <link rel="stylesheet" href="components/demo-lion-dance/style.css">
    <link rel="stylesheet" href="components/demo-tilt/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body class="playground-body">

    <!-- Sticky Header -->
    <header class="playground-header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">P</div>
                <h1>Playground</h1>
            </div>

            <nav class="filter-nav">
                <button class="filter-btn active" data-filter="all">全部</button>
                <button class="filter-btn" data-filter="ui">UI 组件</button>
                <button class="filter-btn" data-filter="game-ui">游戏界面</button>
                <button class="filter-btn" data-filter="effect">视觉特效</button>
                <button class="filter-btn" data-filter="demo">复杂演示</button>
            </nav>

            <a href="#" class="header-link">文档</a>
        </div>
    </header>

    <!-- Main Grid Container -->
    <main class="playground-grid" id="mainGrid">

        <!-- Category: UI Elements (Buttons) -->
        <div class="ui-card" data-category="ui">
            <div class="ui-card-preview">
                <button class="btn-modern btn-primary" onclick="alert('点击了主按钮')">主按钮</button>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".btn-primary">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-btn-primary">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">主按钮 (Primary)</span>
                <span class="ui-tag">#BTN-PRI</span>
            </div>
        </div>

        <div class="ui-card dark-preview" data-category="ui">
            <div class="ui-card-preview">
                <button class="btn-modern btn-glass" onclick="alert('点击了毛玻璃按钮')">毛玻璃效果</button>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".btn-glass">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-btn-glass">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">毛玻璃按钮 (Glass)</span>
                <span class="ui-tag">#BTN-GLASS</span>
            </div>
        </div>

        <!-- Inputs -->
        <div class="ui-card" data-category="ui">
            <div class="ui-card-preview" style="width:80%">
                <div class="input-group">
                    <input type="text" class="input-modern" placeholder=" " id="demoInput">
                    <label for="demoInput" class="input-label">用户名</label>
                </div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".input-group">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-input">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">浮动标签输入框</span>
                <span class="ui-tag">#INP-FLOAT</span>
            </div>
        </div>

        <!-- Toggles -->
        <div class="ui-card" data-category="ui">
            <div class="ui-card-preview">
                <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="slider round"></span>
                </label>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".toggle-switch">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-toggle">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">iOS 开关</span>
                <span class="ui-tag">#TOGGLE</span>
            </div>
        </div>

        <!-- Loaders -->
        <div class="ui-card" data-category="ui">
            <div class="ui-card-preview">
                <div class="loader-spinner"></div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".loader-spinner">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-loader">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">加载转圈</span>
                <span class="ui-tag">#LOAD-SPIN</span>
            </div>
        </div>

        <!-- Cards -->
        <div class="ui-card dark-preview span-2" data-category="ui">
            <div class="ui-card-preview">
                <div class="glass-card-demo" style="width: 100%; max-width: 300px;">
                    <div class="card-content">
                        <h4 class="card-title">毛玻璃卡片</h4>
                        <p class="card-text">背景模糊效果，适合深色背景。</p>
                    </div>
                </div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".glass-card-demo">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-card-glass">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">毛玻璃卡片 (Glass Card)</span>
                <span class="ui-tag">#CARD-GLASS</span>
            </div>
        </div>

        <!-- Category: Game UI Simulator (Combined Overlay) -->
        <div class="ui-card span-2" data-category="game-ui">
            <div class="ui-card-preview game-ui-simulator"
                style="background: linear-gradient(to bottom, #87CEEB, #E0F7FA); position: relative; height: 100%; min-height: 250px; overflow: hidden;">
                <!-- Simulated Game Content -->
                <div style="position: absolute; bottom: 0; width: 100%; height: 30%; background: white;"></div>

                <!-- Simulated Game UI -->
                <div style="position: absolute; top: 10px; right: 10px; display: flex; gap: 10px;">
                    <div class="pause-card-mini" onclick="showToast('点击了暂停')">
                        <span style="font-weight: bold;">||</span>
                    </div>
                </div>

                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                    <div class="history-card-mini"
                        style="background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); text-align: center;">
                        <div class="history-title" style="font-weight: bold; margin-bottom: 5px;">历史记录</div>
                        <div style="font-size: 12px; color: #666; display: flex; flex-direction: column; gap: 4px;">
                            <span>2024-02-04: 9999分</span>
                            <span>2024-02-03: 8888分</span>
                        </div>
                    </div>
                </div>

                <div
                    style="position: absolute; bottom: 10px; width: 100%; text-align: center; color: #333; font-size: 12px;">
                    模拟游戏视口 (Game Viewport)
                </div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-game-ui">复制全套源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">游戏内界面组合 (Game UI)</span>
                <span class="ui-tag">#GAME-UI</span>
            </div>
        </div>

        <!-- Category: Visual Effects (Toggles) -->
        <div class="ui-card" data-category="effect">
            <div class="ui-card-preview" style="flex-direction: column; gap: 10px;">
                <button class="btn-modern btn-outline" onclick="toggleSnow(true)">开启下雪</button>
                <button class="btn-modern btn-outline" onclick="toggleSnow(false)">关闭下雪</button>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-fx-snow">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">全局下雪 (Snow)</span>
                <span class="ui-tag">#FX-SNOW</span>
            </div>
        </div>

        <div class="ui-card" data-category="effect">
            <div class="ui-card-preview">
                <div style="display:flex; gap:10px;">
                    <div onclick="changeBgColor('#f3f4f6')"
                        style="width:30px; height:30px; background:#f3f4f6; border:1px solid #ddd; border-radius:50%; cursor:pointer;"
                        title="浅灰"></div>
                    <div onclick="changeBgColor('#E0F2FE')"
                        style="width:30px; height:30px; background:#E0F2FE; border:1px solid #ddd; border-radius:50%; cursor:pointer;"
                        title="冰蓝"></div>
                    <div onclick="changeBgColor('#1a1a1a')"
                        style="width:30px; height:30px; background:#1a1a1a; border:1px solid #ddd; border-radius:50%; cursor:pointer;"
                        title="深色"></div>
                </div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-fx-bg">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">背景切换 (Background)</span>
                <span class="ui-tag">#FX-BG</span>
            </div>
        </div>

        <div class="ui-card" data-category="effect">
            <div class="ui-card-preview" style="flex-direction: column; gap: 10px;">
                <button class="btn-modern btn-outline" onclick="toggleFirework(true)">开启烟花</button>
                <button class="btn-modern btn-outline" onclick="toggleFirework(false)">关闭烟花</button>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'code')"
                    data-target-id="code-fx-firework">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">点击爆炸 (Firework)</span>
                <span class="ui-tag">#FX-FIREWORK</span>
            </div>
        </div>

        <!-- Category: Complex Demos (Modals) -->
        <div class="ui-card span-2" data-category="demo" onclick="openDemoModal('comic')">
            <div class="ui-card-preview" style="cursor: pointer;">
                <img src="assets/rules/lion-customs-comic.png" style="max-height: 200px; object-fit: contain;">
                <div class="play-icon-overlay">▶</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".comic-wrapper">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-comic">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">舞狮交互漫画 (Lion Dance Comic)</span>
                <span class="ui-tag">#DEMO-COMIC</span>
            </div>
        </div>

        <div class="ui-card" data-category="demo" onclick="openDemoModal('lightbox')">
            <div class="ui-card-preview" style="cursor: pointer;">
                <img src="assets/rules/fis-rules.png" style="max-height: 150px;">
                <div class="overlay-hint">点击预览</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".lightbox-container">复制
                    ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-lightbox">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">灯箱缩放 (Lightbox)</span>
                <span class="ui-tag">#DEMO-LIGHTBOX</span>
            </div>
        </div>

        <div class="ui-card" data-category="demo" onclick="openDemoModal('tilt')">
            <div class="ui-card-preview" style="cursor: pointer;">
                <img src="assets/gallery/snowboard.png" style="max-width: 80%;">
                <div class="overlay-hint">3D 悬浮预览</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'id')" data-value=".tilt-stage">复制 ID</button>
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-tilt">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">3D 倾斜卡片 (Tilt)</span>
                <span class="ui-tag">#DEMO-TILT</span>
            </div>
        </div>

        <!-- Category: Micro Interactions (NEW) -->
        <div class="ui-card" data-category="demo">
            <div class="ui-card-preview" style="background: #1a1a1a;">
                <!-- Preview Implementation: Lantern -->
                <div class="lantern-wrapper" onclick="this.classList.toggle('lit')" style="cursor: pointer;">
                    <div class="lantern-string"></div>
                    <div class="lantern-body">
                        <div class="lantern-light"></div>
                        <div class="lantern-text">福</div>
                    </div>
                    <div class="lantern-tassel"></div>
                </div>
                <style>
                    .lantern-wrapper {
                        position: relative;
                        animation: swing 3s infinite ease-in-out;
                        transform-origin: top center;
                    }

                    .lantern-string {
                        width: 2px;
                        height: 20px;
                        background: #dda0dd;
                        margin: 0 auto;
                        background: #F59E0B;
                    }

                    .lantern-body {
                        width: 60px;
                        height: 50px;
                        background: #DC2626;
                        border-radius: 15px;
                        position: relative;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
                        border: 2px solid #B91C1C;
                        transition: all 0.5s;
                    }

                    .lantern-body::before,
                    .lantern-body::after {
                        content: '';
                        position: absolute;
                        width: 40px;
                        height: 6px;
                        background: #F59E0B;
                        left: 8px;
                        border-radius: 2px;
                    }

                    .lantern-body::before {
                        top: -4px;
                    }

                    .lantern-body::after {
                        bottom: -4px;
                    }

                    .lantern-text {
                        color: #FCD34D;
                        font-family: serif;
                        font-weight: bold;
                        font-size: 24px;
                        pointer-events: none;
                    }

                    .lantern-tassel {
                        width: 4px;
                        height: 30px;
                        background: #EF4444;
                        margin: 0 auto;
                        margin-top: 4px;
                        border-radius: 0 0 4px 4px;
                        box-shadow: 0 0 5px rgba(239, 68, 68, 0.5);
                    }

                    /* Lit State */
                    .lantern-wrapper.lit .lantern-body {
                        background: #EF4444;
                        box-shadow: 0 0 30px #EF4444, inset 0 0 20px #FCA5A5;
                        border-color: #F87171;
                    }

                    .lantern-wrapper.lit .lantern-text {
                        text-shadow: 0 0 5px #fff;
                    }

                    @keyframes swing {

                        0%,
                        100% {
                            transform: rotate(-5deg);
                        }

                        50% {
                            transform: rotate(5deg);
                        }
                    }
                </style>
                <div class="overlay-hint">点击点亮</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-lantern">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">摇曳灯笼 (Lantern)</span>
                <span class="ui-tag">#FX-LANTERN</span>
            </div>
        </div>

        <div class="ui-card" data-category="demo">
            <div class="ui-card-preview">
                <!-- Preview Implementation: Coffee -->
                <div class="coffee-container" onclick="triggerSteam(this)" style="cursor: pointer;">
                    <div class="steam-group">
                        <div class="steam s1"></div>
                        <div class="steam s2"></div>
                        <div class="steam s3"></div>
                    </div>
                    <svg viewBox="0 0 100 100" class="coffee-svg" width="80">
                        <defs>
                            <linearGradient id="cupGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#f3f4f6" />
                                <stop offset="100%" style="stop-color:#e5e7eb" />
                            </linearGradient>
                        </defs>
                        <path d="M20,30 Q20,80 50,80 Q80,80 80,30 L20,30" fill="url(#cupGrad)" stroke="#d1d5db"
                            stroke-width="2" />
                        <path d="M80,40 Q95,40 95,55 Q95,70 80,65" fill="none" stroke="#d1d5db" stroke-width="5"
                            stroke-linecap="round" />
                        <ellipse cx="50" cy="30" rx="30" ry="5" fill="#4B2C20" opacity="0.9" />
                    </svg>
                </div>
                <!-- Inline minimal JS for preview -->
                <script>
                    function triggerSteam(el) {
                        const steam = el.querySelectorAll('.steam');
                        steam.forEach(s => {
                            s.style.animation = 'none';
                            s.offsetHeight; /* trigger reflow */
                            s.style.animation = null;
                            s.classList.add('active');
                            setTimeout(() => s.classList.remove('active'), 2000);
                        });
                    }
                </script>
                <style>
                    .coffee-container {
                        position: relative;
                        margin-top: 20px;
                    }

                    .steam-group {
                        position: absolute;
                        top: -20px;
                        left: 50%;
                        transform: translateX(-50%);
                        width: 40px;
                        height: 40px;
                        pointer-events: none;
                    }

                    .steam {
                        position: absolute;
                        background: rgba(200, 200, 200, 0.6);
                        width: 8px;
                        height: 20px;
                        border-radius: 10px;
                        filter: blur(3px);
                        opacity: 0;
                    }

                    .steam.active {
                        animation: rise 1.5s ease-out forwards;
                    }

                    .s1 {
                        left: 5px;
                        animation-delay: 0s;
                    }

                    .s2 {
                        left: 16px;
                        animation-delay: 0.2s;
                    }

                    .s3 {
                        left: 27px;
                        animation-delay: 0.4s;
                    }

                    @keyframes rise {
                        0% {
                            transform: translateY(0) scale(1);
                            opacity: 0;
                        }

                        50% {
                            opacity: 0.8;
                        }

                        100% {
                            transform: translateY(-30px) scale(2);
                            opacity: 0;
                        }
                    }
                </style>
                <div class="overlay-hint">点击冒热气</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-coffee">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">热咖啡 (Coffee)</span>
                <span class="ui-tag">#FX-COFFEE</span>
            </div>
        </div>

        <div class="ui-card" data-category="demo">
            <div class="ui-card-preview">
                <!-- Preview Implementation: Lion -->
                <!-- Preview Implementation: Lion (Imported Asset) -->
                <style>
                    @keyframes lion-shake {

                        0%,
                        100% {
                            transform: rotate(0deg) scale(1);
                        }

                        25% {
                            transform: rotate(-5deg) scale(1.05);
                        }

                        50% {
                            transform: rotate(5deg) scale(1.05);
                        }

                        75% {
                            transform: rotate(-5deg) scale(1.05);
                        }
                    }

                    .lion-wrapper {
                        width: 140px;
                        height: 140px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
                    }
                </style>
                <div class="lion-wrapper" onclick="danceLion(this)" style="cursor: pointer;">
                    <img src="assets/lion-head-pro.svg" alt="Southern Lion"
                        style="width: 100%; height: 100%; object-fit: contain;">
                </div>
                <script>
                    function danceLion(el) {
                        const img = el.querySelector('img');
                        // Reset animation
                        img.style.animation = 'none';
                        img.offsetHeight; /* trigger reflow */
                        img.style.animation = 'lion-shake 0.6s cubic-bezier(0.36, 0.07, 0.19, 0.97)';

                        // Optional: Vibration effect for responsiveness
                        if (navigator.vibrate) navigator.vibrate(50);
                    }
                </script>
                <div class="overlay-hint">点击舞动</div>
            </div>
            <div class="ui-card-actions">
                <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-lion">复制源码</button>
            </div>
            <div class="ui-card-footer">
                <span class="ui-name">醒狮舞动 (Dance)</span>
                <span class="ui-tag">#FX-LION-PRO</span>
            </div>
        </div>

        <!-- TEMPLATE: HOW TO ADD NEW COMPONENT
         1. Copy this block.
         2. Replace 'YOUR-CATEGORY', 'YOUR-ID' and content.
         3. Add the source code in a <script id="code-YOUR-ID"> block at the bottom.
    -->
        <!--
    <div class="ui-card" data-category="ui">
        <div class="ui-card-preview">
            <button class="btn-modern">Preview Object</button>
        </div>
        <div class="ui-card-actions">
            <button class="action-btn" onclick="copyCode(this, 'code')" data-target-id="code-YOUR-ID">复制源码</button>
        </div>
        <div class="ui-card-footer">
            <span class="ui-name">Component Name</span>
            <span class="ui-tag">#TAG</span>
        </div>
    </div>
    -->

    </main>

    <!-- Global Toast -->
    <div id="toastNotification" class="toast hidden">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span id="toastMessage">已复制!</span>
    </div>

    <!-- Modals Container -->
    <div id="modalContainer"></div>

    <!-- ================================================================= -->
    <!-- CODE SNIPPETS REPOSITORY (Source of Truth for "Copy Code")        -->
    <!-- These snippets must be 100% standalone (HTML/CSS/JS included).    -->
    <!-- ================================================================= -->

    <script type="text/plain" id="code-comic">
<!-- [Interactive Comic Component] -->
    <!-- Dependency: 2 Video Files (Base + Variation), 1 Cover Image -->

    <style>
        /* Container Aspect Ratio 16:9 */
        .comic-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            aspect-ratio: 16/9;
            background: #000;
            overflow: hidden;
            border-radius: 12px;
        }

        .comic-video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .comic-overlay {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 0.5s;
        }

        /* Interactive Mask */
        .comic-mask {
            position: absolute;
            inset: 0;
            background: url('assets/REPLACE_WITH_COVER.png') center/contain no-repeat;
            transition: clip-path 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
            z-index: 10;
        }

        /* Visual Hint (Pulsing Dot) */
        .hotspot-hint {
            position: absolute;
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: hint-pulse 2s infinite;
            pointer-events: none;
        }

        @keyframes hint-pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(255, 255, 255, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
            }
        }
    </style>

    <div class="comic-container">
        <!-- Layer 1: Base Video (Asset A) -->
        <video id="videoBase" class="comic-video" src="assets/video_base.mp4" loop muted autoplay playsinline></video>

        <!-- Layer 2: Alternate Video (Asset B) -->
        <video id="videoAlt" class="comic-video comic-overlay" src="assets/video_alt.mp4" loop muted
            playsinline></video>

        <!-- Layer 3: Static Cover Mask (Asset C) -->
        <div id="comicMask" class="comic-mask"></div>

        <!-- Layer 4: Clickable Hotspots -->
        <div style="position: absolute; inset: 0; z-index: 20;">
            <!-- Panel 1 (Top Left) -->
            <div onclick="triggerComicPanel(0)"
                style="position: absolute; top: 5%; left: 5%; width: 40%; height: 40%; cursor: pointer;">
                <div class="hotspot-hint" style="top: 50%; left: 50%;"></div>
            </div>
            <!-- Panel 2 (Bottom Right) -->
            <div onclick="triggerComicPanel(1)"
                style="position: absolute; bottom: 5%; right: 5%; width: 40%; height: 40%; cursor: pointer;">
                <div class="hotspot-hint" style="top: 50%; left: 50%;"></div>
            </div>
        </div>
    </div>

    <script>
    let activePanelIdx = -1;
    
    function triggerComicPanel(index) {
        const mask = document.getElementById('comicMask');
        const vBase = document.getElementById('videoBase');
        const vAlt = document.getElementById('videoAlt');
        
        // Define Clip Paths for each panel state
        const clips = [
            'polygon(0% 0%, 50% 0%, 50% 50%, 0% 50%)', // Reveal Top Left
            'polygon(50% 50%, 100% 50%, 100% 100%, 50% 100%)' // Reveal Bottom Right
        ];

        // Toggle Logic
        if (activePanelIdx === index) {
            // Close
            activePanelIdx = -1;
            mask.style.clipPath = 'none'; // Show full cover
            vAlt.style.opacity = '0'; vAlt.pause();
            vBase.play();
        } else {
            // Open
            activePanelIdx = index;
            mask.style.clipPath = clips[index]; // Cut hole in cover
            
            // Example: Play Alt video only for Panel 1
            if (index === 1) {
                vAlt.style.opacity = '1'; vAlt.play(); vBase.pause();
            } else {
                vAlt.style.opacity = '0'; vBase.play();
            }
        }
    }
</script>
    </script>

    <script type="text/plain" id="code-tilt">
<!-- [3D Tilt Card Component] -->
    <style>
        .tilt-wrapper {
            perspective: 1000px;
            display: inline-block;
            padding: 20px;
        }

        .tilt-card {
            width: 100%;
            max-width: 300px;
            transition: transform 0.1s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform-style: preserve-3d;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-radius: 12px;
        }
    </style>

    <div class="tilt-wrapper" onmousemove="handleTiltMove(event)" onmouseleave="resetTilt(event)">
        <img class="tilt-card" src="assets/REPLACE_WITH_IMAGE.png" alt="3D Card">
    </div>

    <script>
    function handleTiltMove(e) {
        requestAnimationFrame(() => {
            const wrapper = e.currentTarget;
            const card = wrapper.querySelector('.tilt-card');
            const rect = wrapper.getBoundingClientRect();
            
            // Calculate mouse position (-0.5 to 0.5)
            const x = (e.clientX - rect.left) / rect.width - 0.5;
            const y = (e.clientY - rect.top) / rect.height - 0.5;
            
            // Apply Transform (Rotate + Slight Scale)
            card.style.transform = `rotateY(${x * 20}deg) rotateX(${-y * 20}deg) scale(1.02)`;
        });
    }

    function resetTilt(e) {
        const card = e.currentTarget.querySelector('.tilt-card');
        card.style.transform = 'none';
    }
</script>
    </script>

    <script type="text/plain" id="code-lightbox">
<!-- [Lightbox Viewer Component] -->
    <style>
        .lb-trigger {
            cursor: zoom-in;
            transition: transform 0.2s;
        }

        .lb-trigger:hover {
            transform: scale(1.02);
        }

        .lb-modal {
            position: fixed;
            inset: 0;
            z-index: 10000;
            /* High Z-Index */
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .lb-modal.active {
            display: flex;
            opacity: 1;
        }

        .lb-image {
            max-width: 90vw;
            max-height: 90vh;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        .lb-modal.active .lb-image {
            transform: scale(1);
        }
    </style>

    <!-- Trigger Image -->
    <img class="lb-trigger" src="assets/REPLACE_THUMB.png" onclick="openLightbox(this)"
        data-full="assets/REPLACE_FULL.png">

    <!-- Shared Modal Structure (Paste once at bottom of page) -->
    <div id="globalLightbox" class="lb-modal" onclick="closeLightbox()">
        <img id="lbTarget" class="lb-image" src="">
    </div>

    <script>
    function openLightbox(el) {
        const fullSrc = el.getAttribute('data-full') || el.src; // Fallback to src
        const modal = document.getElementById('globalLightbox');
        const target = document.getElementById('lbTarget');
        
        target.src = fullSrc;
        modal.classList.add('active');
    }

    function closeLightbox() {
        document.getElementById('globalLightbox').classList.remove('active');
    }
</script>
    </script>

    <!-- UI Component Logic (Hidden Code Sources) -->

    <script type="text/plain" id="code-btn-primary">
<style>
/* Modern Button Variables */
:root { --primary: #6366f1; --primary-hover: #4f46e5; }

.btn-modern { 
    border: none; border-radius: 8px; padding: 10px 24px; 
    font-weight: 600; cursor: pointer; transition: all 0.2s; 
    font-family: inherit;
}
.btn-primary { 
    background: linear-gradient(135deg, var(--primary), var(--primary-hover)); 
    color: white; box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3);
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 8px rgba(99, 102, 241, 0.4); }
.btn-primary:active { transform: translateY(0); }
</style>

<button class="btn-modern btn-primary">Primary Action</button>
    </script>

    <script type="text/plain" id="code-btn-glass">
<style>
.btn-glass { 
    background: rgba(255, 255, 255, 0.1); 
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2); 
    color: white; padding: 10px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.2s;
}
.btn-glass:hover { background: rgba(255, 255, 255, 0.2); transform: scale(1.05); }
</style>

<button class="btn-glass">Glass Button</button>
    </script>

    <script type="text/plain" id="code-input">
<style>
.input-group { position: relative; width: 100%; max-width: 300px; margin: 10px 0; }
.input-modern { 
    width: 100%; padding: 12px 16px; 
    border: 1px solid #e5e7eb; border-radius: 8px; outline: none; 
    background: white; transition: border-color 0.2s;
}
.input-modern:focus { border-color: #6366f1; }
.input-label { 
    position: absolute; left: 12px; top: 50%; transform: translateY(-50%); 
    background: white; padding: 0 4px; color: #9ca3af; 
    pointer-events: none; transition: 0.2s ease-out;
}
.input-modern:focus ~ .input-label, 
.input-modern:not(:placeholder-shown) ~ .input-label { 
    top: 0; font-size: 0.75rem; color: #6366f1;
}
</style>

<div class="input-group">
    <input type="text" class="input-modern" placeholder=" ">
    <label class="input-label">User Name</label>
</div>
    </script>

    <script type="text/plain" id="code-toggle">
<style>
.toggle-switch { position: relative; display: inline-block; width: 48px; height: 28px; }
.toggle-switch input { opacity: 0; width: 0; height: 0; }
.slider { 
    position: absolute; cursor: pointer; inset: 0; 
    background-color: #e5e7eb; transition: .4s; border-radius: 34px; 
}
.slider:before { 
    position: absolute; content: ""; height: 22px; width: 22px; left: 3px; bottom: 3px; 
    background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
input:checked + .slider { background-color: #3b82f6; }
input:checked + .slider:before { transform: translateX(20px); }
</style>

<label class="toggle-switch">
    <input type="checkbox" checked>
    <span class="slider"></span>
</label>
    </script>

    <script type="text/plain" id="code-loader">
<style>
.spinner { 
    width: 40px; height: 40px; 
    border: 4px solid #f3f3f3; border-top: 4px solid #3498db; 
    border-radius: 50%; animation: spin 1s linear infinite; 
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>

<div class="spinner"></div>
    </script>

    <script type="text/plain" id="code-card-glass">
<style>
.glass-card { 
    background: rgba(255, 255, 255, 0.05); 
    backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.1); 
    padding: 20px; border-radius: 16px; color: white; 
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
}
</style>
<div class="glass-card">
    <h3 style="margin-top:0">Glassmorphism</h3>
    <p>Soft blur effect, perfect for overlays.</p>
</div>
    </script>

    <script type="text/plain" id="code-fx-snow">
<style>
    /* Full Screen Fixed Overlay */
    #snowCanvas {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        pointer-events: none; z-index: 9999;
    }
</style>

<canvas id="snowCanvas"></canvas>

<script>
(function() {
    const canvas = document.getElementById('snowCanvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    const particles = [];
    
    function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    // Create Snowflakes
    for(let i=0; i<50; i++) {
        particles.push({
            x: Math.random() * width,
            y: Math.random() * height,
            r: Math.random() * 3 + 1,
            d: Math.random() * 10 + 20 // Density
        });
    }

    function draw() {
        ctx.clearRect(0, 0, width, height);
        ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
        ctx.beginPath();
        for(let i=0; i<particles.length; i++) {
            const p = particles[i];
            ctx.moveTo(p.x, p.y);
            ctx.arc(p.x, p.y, p.r, 0, Math.PI*2, true);
        }
        ctx.fill();
        update();
        requestAnimationFrame(draw);
    }

    let angle = 0;
    function update() {
        angle += 0.01;
        for(let i=0; i<particles.length; i++) {
            const p = particles[i];
            // Update coordinates
            p.y += Math.cos(angle+p.d) + 1 + p.r/2;
            p.x += Math.sin(angle) * 2;

            // Reset if out of view
            if(p.x > width + 5 || p.x < -5 || p.y > height) {
                if(i%3 > 0) { // 66% of the flakes
                    particles[i] = {x: Math.random()*width, y: -10, r: p.r, d: p.d};
                } else {
                    // Enter from the right
                    if(Math.sin(angle) > 0) {
                        particles[i] = {x: -5, y: Math.random()*height, r: p.r, d: p.d};
                    } else {
                        particles[i] = {x: width+5, y: Math.random()*height, r: p.r, d: p.d};
                    }
                }
            }
        }
    }

    draw();
})();
</script>
    </script>

    <script type="text/plain" id="code-fx-bg">
<style>
    /* Smooth transition for background color */
    body { transition: background-color 0.5s ease; }
    
    .bg-controls { position: fixed; bottom: 20px; right: 20px; display: flex; gap: 8px; background: white; padding: 8px; border-radius: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); z-index: 1000; }
    .bg-dot { width: 24px; height: 24px; border-radius: 50%; border: 1px solid #ddd; cursor: pointer; transition: transform 0.2s; }
    .bg-dot:hover { transform: scale(1.1); }
</style>

<div class="bg-controls">
    <div class="bg-dot" style="background: #f3f4f6" onclick="setBg('#f3f4f6')" title="Light Gray"></div>
    <div class="bg-dot" style="background: #E0F2FE" onclick="setBg('#E0F2FE')" title="Ice Blue"></div>
    <div class="bg-dot" style="background: #111827" onclick="setBg('#111827')" title="Dark Mode"></div>
</div>

<script>
    function setBg(color) {
        document.body.style.backgroundColor = color;
        // Optional: Toggle text color for dark mode
        document.body.style.color = (color === '#111827') ? '#ffffff' : '#333333';
    }
</script>
    </script>

    <script type="text/plain" id="code-lantern">
<style>
    /* 1. Lantern Animation */
    @keyframes swing { 
        0%, 100% { transform: rotate(-5deg); } 
        50% { transform: rotate(5deg); } 
    }
    
    .fx-lantern-wrapper {
        position: relative; width: fit-content; margin: 20px auto;
        animation: swing 3s infinite ease-in-out; transform-origin: top center;
        cursor: pointer;
    }

    /* String */
    .lantern-string { width: 2px; height: 30px; background: #F59E0B; margin: 0 auto; }

    /* Body */
    .lantern-body { 
        width: 80px; height: 65px; 
        background-color: #DC2626; /* Red-600 */
        border: 2px solid #991B1B; /* Red-800 */
        border-radius: 20px;
        position: relative;
        display: flex; align-items: center; justify-content: center;
        box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
        transition: all 0.5s ease;
    }
    
    /* Gold Bands */
    .lantern-body::before, .lantern-body::after {
        content: ''; position: absolute; left: 10px; right: 10px; height: 6px;
        background: #F59E0B; /* Amber-500 */ border-radius: 3px;
    }
    .lantern-body::before { top: -4px; }
    .lantern-body::after { bottom: -4px; }

    /* Text */
    .lantern-text { 
        color: #FCD34D; font-size: 32px; font-weight: bold; font-family: "Kaiti", serif;
        user-select: none; text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }

    /* Tassel */
    .lantern-tassel {
        width: 6px; height: 50px; background: #dc2626; margin: 0 auto; margin-top: 5px;
        border-radius: 0 0 4px 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    /* Interactive: Lit */
    .fx-lantern-wrapper.lit .lantern-body {
        background-color: #EF4444; /* Red-500 (Brighter) */
        box-shadow: 0 0 50px rgba(239, 68, 68, 0.6), inset 0 0 20px #FCA5A5;
        border-color: #F87171;
    }
    .fx-lantern-wrapper.lit .lantern-text {
        text-shadow: 0 0 10px #fff, 0 0 20px #FCD34D;
        color: #FFFBEB;
    }
</style>

<div class="fx-lantern-wrapper" onclick="this.classList.toggle('lit')">
    <div class="lantern-string"></div>
    <div class="lantern-body">
        <div class="lantern-text">福</div>
    </div>
    <div class="lantern-tassel"></div>
</div>
    </script>

    <script type="text/plain" id="code-coffee">
<style>
    .fx-coffee-container {
        position: relative; width: 100px; height: 100px; margin: 30px auto;
        cursor: pointer;
    }
    
    /* Steam Particles */
    .steam-particle {
        position: absolute; width: 10px; height: 25px;
        background: rgba(255, 255, 255, 0.6);
        border-radius: 10px; filter: blur(4px); opacity: 0;
        top: 0; left: 50%; pointer-events: none;
    }
    
    /* Animation definition */
    @keyframes steam-rise {
        0% { transform: translateY(0) scale(1) translateX(0); opacity: 0; }
        20% { opacity: 0.6; }
        100% { transform: translateY(-40px) scale(2.5) translateX(10px); opacity: 0; }
    }

    /* Cup Implementation (Inline SVG for clean code) */
    .coffee-svg { overflow: visible; }
</style>

<div class="fx-coffee-container" onclick="puffSteam(this)">
    <div class="steam-group">
        <div class="steam-particle" style="left: 35%;"></div>
        <div class="steam-particle" style="left: 50%;"></div>
        <div class="steam-particle" style="left: 65%;"></div>
    </div>
    
    <svg viewBox="0 0 100 80" class="coffee-svg">
        <defs>
            <linearGradient id="cupMain" x1="0" y1="0" x2="1" y2="0">
                <stop offset="0%" stop-color="#F3F4F6"/>
                <stop offset="100%" stop-color="#E5E7EB"/>
            </linearGradient>
        </defs>
        <path d="M15,10 Q15,60 50,60 Q85,60 85,10 L15,10" fill="url(#cupMain)" stroke="#D1D5DB" stroke-width="2"/>
        <path d="M85,20 Q98,20 98,35 Q98,50 85,45" fill="none" stroke="#D1D5DB" stroke-width="6" stroke-linecap="round"/>
        <ellipse cx="50" cy="10" rx="35" ry="6" fill="#4B2C20"/>
    </svg>
</div>

<script>
    function puffSteam(container) {
        const parts = container.querySelectorAll('.steam-particle');
        parts.forEach((p, i) => {
            // Reset animation hack
            p.style.animation = 'none';
            p.offsetHeight; 
            // Stagger animation
            p.style.animation = `steam-rise 1.5s ease-out forwards ${i * 0.2}s`;
        });
    }
</script>
    </script>

    <script type="text/plain" id="code-lion">
<style>
    @keyframes lion-shake {
        0%, 100% { transform: rotate(0deg) scale(1); }
        25% { transform: rotate(-5deg) scale(1.05); }
        50% { transform: rotate(5deg) scale(1.05); }
        75% { transform: rotate(-5deg) scale(1.05); }
    }
    
    .fx-lion-wrapper {
        width: 140px; height: 140px; margin: 0 auto;
        display: flex; align-items: center; justify-content: center;
        cursor: pointer;
        filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
    }
</style>

<div class="fx-lion-wrapper" onclick="playLionDance(this)">
    <!-- Requires 'lion-head-pro.svg' in assets folder -->
    <img src="assets/lion-head-pro.svg" alt="Southern Lion" style="width: 100%; height: 100%; object-fit: contain;">
</div>

<script>
    function playLionDance(el) {
        const img = el.querySelector('img');
        img.style.animation = 'none'; // Reset
        img.offsetHeight; // Force reflow
        img.style.animation = 'lion-shake 0.6s cubic-bezier(0.36, 0.07, 0.19, 0.97)';
    }
</script>


    </script>

    <script type="text/plain" id="code-fx-firework">
    <script>
        (function () {
            // 1. Setup Canvas
            const canvas = document.createElement('canvas');
            canvas.style.cssText = 'position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9999;';
            document.body.appendChild(canvas);
            const ctx = canvas.getContext('2d');

            let width = window.innerWidth, height = window.innerHeight;
            window.addEventListener('resize', () => { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; });
            width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight;

            // 2. Data Structures
            const rockets = [];
            const particles = [];

            // 3. Interaction
            document.addEventListener('mousedown', (e) => {
                // Avoid potentially interactive elements
                if (e.target.closest('button') || e.target.closest('input') || e.target.closest('a')) return;

                const targetX = e.clientX;
                const targetY = e.clientY;
                // Red spectrum: 340-360 and 0-20
                const hue = Math.random() > 0.5 ? Math.random() * 30 : 330 + Math.random() * 30;

                // Launch Rocket (Shoot from bottom)
                rockets.push({
                    x: targetX, y: height, // Start at bottom
                    tx: targetX, ty: targetY, // Target
                    vx: 0, vy: (targetY - height) / 30, // 30 frames to reach
                    hue: hue
                });
            });

            // 4. Animation Loop
            function loop() {
                // Trail Effect
                ctx.globalCompositeOperation = 'destination-out';
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.fillRect(0, 0, width, height);
                ctx.globalCompositeOperation = 'lighter';

                // Update Rockets
                for (let i = rockets.length - 1; i >= 0; i--) {
                    const r = rockets[i];

                    // Draw Trail
                    ctx.beginPath();
                    ctx.moveTo(r.x, r.y);
                    r.x += r.vx; r.y += r.vy;
                    ctx.lineTo(r.x, r.y);
                    ctx.strokeStyle = `hsl(${r.hue}, 100%, 50%)`;
                    ctx.lineWidth = 3;
                    ctx.stroke();

                    // Explode if reached
                    if (r.y <= r.ty) {
                        createExplosion(r.x, r.y, r.hue);
                        rockets.splice(i, 1);
                    }
                }

                // Update Particles
                for (let i = particles.length - 1; i >= 0; i--) {
                    const p = particles[i];
                    p.x += p.vx; p.y += p.vy;
                    p.vy += 0.05; // Gravity
                    p.vx *= 0.95; p.vy *= 0.95; // Friction
                    p.alpha -= p.decay;

                    if (p.alpha <= 0) { particles.splice(i, 1); continue; }

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                    ctx.fillStyle = `hsla(${p.hue}, 100%, 60%, ${p.alpha})`;
                    ctx.fill();
                }
                requestAnimationFrame(loop);
            }

            function createExplosion(x, y, hue) {
                for (let i = 0; i < 60; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 4 + 2;
                    particles.push({
                        x: x, y: y,
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed,
                        hue: hue,
                        alpha: 1, decay: Math.random() * 0.02 + 0.01
                    });
                }
            }

            loop();
        })();
    </script>
    </script>

    <script type="text/plain" id="code-game-ui">
<style>
.ui-overlay-container { pointer-events: none; position: absolute; inset: 0; padding: 20px; display: flex; flex-direction: column; justify-content: space-between; }
.ui-interactive { pointer-events: auto; }

/* Mini Components */
.btn-pause { width: 44px; height: 44px; background: white; border-radius: 50%; display: grid; place-items: center; box-shadow: 0 4px 8px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.1s; }
.btn-pause:active { transform: scale(0.95); }

.score-panel { background: rgba(255,255,255,0.9); padding: 10px 20px; border-radius: 20px; font-weight: bold; font-family: monospace; font-size: 1.2rem; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
</style>

<!-- Full Screen Game UI Overlay -->
<div class="ui-overlay-container">
    <!-- Top Row -->
    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div class="score-panel">SCORE: 000</div>
        <div class="btn-pause ui-interactive" onclick="alert('Pause')">||</div>
    </div>

    <!-- Bottom Row -->
    <div style="text-align: center;">
        <span style="background: rgba(0,0,0,0.5); color: white; padding: 4px 12px; border-radius: 10px; font-size: 0.8rem;">Tap to Jump</span>
    </div>
</div>
    </script>

    <!-- TEMPLATE: ADD NEW COMPONENT SOURCE HERE -->
    <!-- <script type="text/plain" id="code-YOUR-ID">...</script> -->

    <!-- Hidden Canvas for Snow Effect -->
    <div style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:-1; visibility:hidden;"
        id="gameContainer">
        <canvas id="gameCanvas"></canvas>
    </div>

    <!-- Core & Components Logic -->
    <script src="core/snow-effect.js"></script>
    <script src="core/app.js"></script>
    <script src="core/firework-effect.js"></script>
    <script src="components/demo-lion-dance/logic.js"></script>
    <script src="components/demo-tilt/logic.js"></script>

</body>

</html>